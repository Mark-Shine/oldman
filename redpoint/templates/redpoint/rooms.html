{% extends 'base.html' %}
{%block extra %}
<style type="text/css">
.bed-container {
  border: 1px solid #ddd;
  border-radius: 4px; 
  padding: 4px;line-height: 1.42857143;
  margin-bottom: 15px;
}
.bed-container .thumbnail {
  padding: 0px;
  border:none;
  width:100%;
  overflow: hidden;
  border-radius: 0px;
  height: 199px;
  margin-bottom: 10px;
}
.bed-container .thumbnail img {
  width: 100%;
  height: 100%;
}
.bed-container .caption {
  padding:9px;
  color:#000;
}
.bed-container .caption p:last-child {
  margin-bottom: 0px;
}
</style>
{%endblock%}

{%block mod_content%}
<div class="row ">
  <div class="col-sm-3 col-md-12">
  <h3 class="page-header">床位登记</h3>
  <ul class="list-inline">
      <li>剩余床位：{{beds_avilable_counts}}</li>
      <li>总床位数：{{beds_all_counts}}</li>

  </ul>
  </div>
</div>
  {%for room in rooms%}
  <div class="row">
  <div class="col-sm-3 col-md-12 ">
      <h4>房间 {{room.floor}}楼{{room.room_number}}室 <a href="{%url 'room' %}?id={{room.id}}"><small>进入房间</small></a></h4>
      {%for bed in room.bed_set.all %}
      <div class="col-sm-3 col-md-3 ">
        <div class="thumbnail">
          <div class="caption">
          {%if not bed.who %}
          <a class="center-block text-center" href="{%url 'show_checkin'%}?bed={{bed.number}}&room={{room.id}}"><span class="glyphicon glyphicon-plus " style="font-size: 20px; padding-bottom: 10px"></span></a>
          {%else%}
          <p class="text-center">该床位已经占用</p>
          {%endif%}
          <p class="text-center">床位号：{{bed.number}} </p>
          </div>
        </div>
      </div>
      {%empty%}
        <p class="text-center ">暂无空余床位</p>
      {%endfor%}
  </div>
  </div>
  {%endfor%}

<h5 class="page-header">非空余床位</h5>
  <div class="col-sm-3 col-md-12 ">

   {%for bed in occupyied_beds%}
      {%if bed.who %}
      <div class="col-sm-3 col-md-3 " >
        <div class="bed-container">
          <div class="thumbnail">
            <img  alt="..." src="{{bed.who.avatar.url}}" >
          </div>
          <div class="caption">
            <p>房间号：{{bed.room.floor}}-{{bed.room.room_number}}</p>
            <p>床位号：{{bed.number}} <a style="font-size: 14px"class="pull-right" href="{%url 'checkout'%}?bedid={{bed.id}}">退房</a></p>
          </div>
        </div>
      </div>
    {%endif%}
  {%endfor%}

  </div>
</div>

{%endblock%}